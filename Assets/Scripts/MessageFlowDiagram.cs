
// Message Flow Diagram - AI-generated
// Examples of how messages are processed on the client and server.

// Example 1: Game Start â†’ Client Join

/*TIME â†’
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 1: HOST INITIALIZATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

HOST APPLICATION (Unity Editor/Standalone Build)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  [Unity Scene Loads]                                                    â”‚
â”‚         â†“                                                               â”‚
â”‚  [Awake()] on all MonoBehaviours                                        â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚GameSessionManager  â”‚  â”‚HostNetworkManager    â”‚  â”‚SimpleTransport â”‚  â”‚
â”‚  â”‚                    â”‚  â”‚                      â”‚  â”‚                â”‚  â”‚
â”‚  â”‚ â€¢ minPlayers = 3   â”‚  â”‚ â€¢ serverPort = 7777  â”‚  â”‚ â€¢ isServer=âŒ  â”‚  â”‚
â”‚  â”‚ â€¢ currentState =   â”‚  â”‚ â€¢ sessionManager ref â”‚  â”‚ â€¢ isClient=âŒ  â”‚  â”‚
â”‚  â”‚   Lobby            â”‚  â”‚ â€¢ transport ref      â”‚  â”‚                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â†“                         â†“                         â†“           â”‚
â”‚  [OnEnable()]              [OnEnable()]                                 â”‚
â”‚         â†“                         â†“                                     â”‚
â”‚  (waiting for events)      Subscribe to events:                        â”‚
â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚                            â”‚ transport.OnClientConnected     â”‚         â”‚
â”‚                            â”‚ transport.OnClientDisconnected  â”‚         â”‚
â”‚                            â”‚ transport.OnMessageReceived     â”‚         â”‚
â”‚                            â”‚ sessionManager.OnStateChanged   â”‚         â”‚
â”‚                            â”‚ sessionManager.OnPlayerJoined   â”‚         â”‚
â”‚                            â”‚ sessionManager.OnPlayerLeft     â”‚         â”‚
â”‚                            â”‚ sessionManager.OnAnswerSubmittedâ”‚         â”‚
â”‚                            â”‚ sessionManager.OnVoteSubmitted  â”‚         â”‚
â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 2: HOST STARTS SERVER
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

HOST APPLICATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  [User clicks "Start Host" button]                                      â”‚
â”‚         â†“                                                               â”‚
â”‚  HostNetworkManager.StartHost()                                         â”‚
â”‚         â†“                                                               â”‚
â”‚  transport.StartServer(7777)                                            â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚  â”‚SimpleTransport â”‚                                                     â”‚
â”‚  â”‚                â”‚                                                     â”‚
â”‚  â”‚ isServer = âœ…  â”‚  â† Server listening on port 7777                    â”‚
â”‚  â”‚ isConnected=âœ… â”‚                                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚         â†“                                                               â”‚
â”‚  Debug.Log("Host started on port 7777") ğŸŸ¢                              â”‚
â”‚                                                                         â”‚
â”‚  [Host is now waiting for client connections]                           â”‚
â”‚  [GameSessionManager.currentState = Lobby]                              â”‚
â”‚  [PlayerCount = 0]                                                      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 3: CLIENT INITIALIZATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CLIENT APPLICATION (WebGL or Standalone)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  [Scene Loads]                                                          â”‚
â”‚         â†“                                                               â”‚
â”‚  [Awake()]                                                              â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ClientNetworkManager  â”‚  â”‚ClientUIManager â”‚  â”‚SimpleTransport   â”‚     â”‚
â”‚  â”‚                      â”‚  â”‚                â”‚  â”‚                  â”‚     â”‚
â”‚  â”‚ â€¢ serverAddress =    â”‚  â”‚ â€¢ Shows Join   â”‚  â”‚ â€¢ isServer = âŒ  â”‚     â”‚
â”‚  â”‚   "localhost"        â”‚  â”‚   Panel        â”‚  â”‚ â€¢ isClient = âŒ  â”‚     â”‚
â”‚  â”‚ â€¢ serverPort = 7777  â”‚  â”‚                â”‚  â”‚                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â†“                         â†“                                     â”‚
â”‚  [OnEnable()]              [Shows Join UI]                              â”‚
â”‚         â†“                         â†“                                     â”‚
â”‚  Subscribe to:              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â€¢ transport.               â”‚ [Name Input] â”‚                            â”‚
â”‚    OnMessageReceived        â”‚ [Join Button]â”‚                            â”‚
â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                         â”‚
â”‚  [Waiting for user to enter name and click Join]                        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 4: CLIENT CONNECTS TO SERVER
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CLIENT                          NETWORK                          HOST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚                              â”‚                      â”‚
â”‚ [User types "Alice"] â”‚                              â”‚                      â”‚
â”‚ [Clicks Join]        â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ ClientUIManager.     â”‚                              â”‚                      â”‚
â”‚ OnJoinClicked()      â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ ClientNetworkManager.â”‚                              â”‚                      â”‚
â”‚ ConnectToServer      â”‚                              â”‚                      â”‚
â”‚ ("Alice")            â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ transport.Connect    â”‚                              â”‚                      â”‚
â”‚ ("localhost", 7777)  â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                              â”‚                      â”‚
â”‚ â”‚SimpleTransport   â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ isClient = âœ…    â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ isConnected = âœ… â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ clientId =       â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ "client-abc123"  â”‚ â”‚    TCP/WebSocket Connection  â”‚                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•>â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚        â†“             â”‚
â”‚ (Connection Success) â”‚                              â”‚ transport.           â”‚
â”‚        â†“             â”‚                              â”‚ OnClientConnected    â”‚
â”‚                      â”‚                              â”‚ fires âš¡             â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ HostNetworkManager.  â”‚
â”‚                      â”‚                              â”‚ HandleClient         â”‚
â”‚                      â”‚                              â”‚ Connected            â”‚
â”‚                      â”‚                              â”‚ ("client-abc123")    â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Debug.Log            â”‚
â”‚                      â”‚                              â”‚ "Client connected:   â”‚
â”‚                      â”‚                              â”‚  client-abc123" ğŸŸ¢   â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ (Waiting for join    â”‚
â”‚                      â”‚                              â”‚  request message)    â”‚
â”‚                      â”‚                              â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NOTE: At this point, CLIENT is CONNECTED but NOT JOINED
      Host knows a client connected, but doesn't know who they are yet!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 5: CLIENT SENDS JOIN REQUEST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CLIENT                                                            HOST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚                              â”‚                      â”‚
â”‚ ClientNetworkManager â”‚                              â”‚                      â”‚
â”‚ .SendJoinRequest()   â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ Create payload:      â”‚                              â”‚                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                              â”‚                      â”‚
â”‚ â”‚JoinRequestPayloadâ”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚{                 â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ playerName:      â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚   "Alice"        â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚}                 â”‚ â”‚                              â”‚                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ JsonUtility.ToJson() â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ payloadJson =        â”‚                              â”‚                      â”‚
â”‚ '{"playerName":      â”‚                              â”‚                      â”‚
â”‚   "Alice"}'          â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ Create message:      â”‚                              â”‚                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                              â”‚                      â”‚
â”‚ â”‚NetworkMessage    â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚{                 â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ type: "join_     â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚       request"   â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ payload:         â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚   '{"playerName":â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚     "Alice"}'    â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ senderId: ""     â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ timestamp:       â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚   1234567890     â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚}                 â”‚ â”‚                              â”‚                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ message.ToJson()     â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ messageJson =        â”‚                              â”‚                      â”‚
â”‚ '{"type":"join_      â”‚                              â”‚                      â”‚
â”‚   request",          â”‚                              â”‚                      â”‚
â”‚   "payload":"{...}", â”‚                              â”‚                      â”‚
â”‚   "senderId":"",     â”‚                              â”‚                      â”‚
â”‚   "timestamp":...}'  â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ transport.           â”‚                              â”‚                      â”‚
â”‚ SendToServer         â”‚       JSON over network      â”‚                      â”‚
â”‚ (messageJson)        â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•>â”‚                      â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ transport.           â”‚
â”‚                      â”‚                              â”‚ OnMessageReceived    â”‚
â”‚                      â”‚                              â”‚ fires âš¡             â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Event args:          â”‚
â”‚                      â”‚                              â”‚ â€¢ senderId:          â”‚
â”‚                      â”‚                              â”‚   "client-abc123"    â”‚
â”‚                      â”‚                              â”‚ â€¢ messageJson:       â”‚
â”‚                      â”‚                              â”‚   '{...}'            â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ HostNetworkManager.  â”‚
â”‚                      â”‚                              â”‚ HandleMessage        â”‚
â”‚                      â”‚                              â”‚ Received()           â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Try-Catch block      â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ NetworkMessage       â”‚
â”‚                      â”‚                              â”‚ .FromJson            â”‚
â”‚                      â”‚                              â”‚ (messageJson)        â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Parsed message:      â”‚
â”‚                      â”‚                              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚                              â”‚ â”‚type:             â”‚ â”‚
â”‚                      â”‚                              â”‚ â”‚ "join_request"   â”‚ â”‚
â”‚                      â”‚                              â”‚ â”‚payload:          â”‚ â”‚
â”‚                      â”‚                              â”‚ â”‚ '{"playerName":  â”‚ â”‚
â”‚                      â”‚                              â”‚ â”‚   "Alice"}'      â”‚ â”‚
â”‚                      â”‚                              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ ProcessMessage       â”‚
â”‚                      â”‚                              â”‚ ("client-abc123",    â”‚
â”‚                      â”‚                              â”‚  message)            â”‚
â”‚                      â”‚                              â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 6: HOST PROCESSES JOIN REQUEST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

HOST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  HostNetworkManager.ProcessMessage("client-abc123", message)            â”‚
â”‚         â†“                                                               â”‚
â”‚  Switch on message.type:                                                â”‚
â”‚         â†“                                                               â”‚
â”‚  case MessageTypes.JOIN_REQUEST:                                        â”‚
â”‚         â†“                                                               â”‚
â”‚  HandleJoinRequest("client-abc123", message)                            â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 1. Parse Payload                                               â”‚     â”‚
â”‚  â”‚    â†“                                                           â”‚     â”‚
â”‚  â”‚    JoinRequestPayload payload =                                â”‚     â”‚
â”‚  â”‚    JsonUtility.FromJson<JoinRequestPayload>(message.payload)   â”‚     â”‚
â”‚  â”‚    â†“                                                           â”‚     â”‚
â”‚  â”‚    payload.playerName = "Alice"                                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 2. Call Game Logic                                             â”‚     â”‚
â”‚  â”‚    â†“                                                           â”‚     â”‚
â”‚  â”‚    var result = sessionManager.AddPlayer("Alice")              â”‚     â”‚
â”‚  â”‚    â†“                                                           â”‚     â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚     â”‚
â”‚  â”‚    â”‚ GameSessionManager.AddPlayer()           â”‚                â”‚     â”‚
â”‚  â”‚    â”‚    â†“                                     â”‚                â”‚     â”‚
â”‚  â”‚    â”‚ Check: currentState == Lobby? âœ…         â”‚               â”‚      â”‚
â”‚  â”‚    â”‚ Check: players.Count < maxPlayers? âœ…    â”‚               â”‚      â”‚
â”‚  â”‚    â”‚ Check: playerName valid? âœ…              â”‚               â”‚      â”‚
â”‚  â”‚    â”‚    â†“                                     â”‚               â”‚      â”‚
â”‚  â”‚    â”‚ Generate ID:                             â”‚               â”‚      â”‚
â”‚  â”‚    â”‚   playerId = Guid.NewGuid().ToString()   â”‚               â”‚      â”‚
â”‚  â”‚    â”‚   playerId = "player-xyz789"             â”‚               â”‚      â”‚
â”‚  â”‚    â”‚    â†“                                     â”‚               â”‚      â”‚
â”‚  â”‚    â”‚ Create PlayerData:                       â”‚               â”‚      â”‚
â”‚  â”‚    â”‚   new PlayerData("player-xyz789",        â”‚               â”‚      â”‚
â”‚  â”‚    â”‚                  "Alice")                â”‚               â”‚      â”‚
â”‚  â”‚    â”‚    â†“                                     â”‚               â”‚      â”‚
â”‚  â”‚    â”‚ Store in dictionary:                     â”‚               â”‚      â”‚
â”‚  â”‚    â”‚   players["player-xyz789"] = newPlayer   â”‚               â”‚      â”‚
â”‚  â”‚    â”‚    â†“                                     â”‚               â”‚      â”‚
â”‚  â”‚    â”‚ Fire event:                              â”‚               â”‚      â”‚
â”‚  â”‚    â”‚   OnPlayerJoined?.Invoke(newPlayer) âš¡    â”‚               â”‚      â”‚
â”‚  â”‚    â”‚    â†“                                     â”‚               â”‚      â”‚
â”‚  â”‚    â”‚ Return:                                  â”‚               â”‚      â”‚
â”‚  â”‚    â”‚   (success: true,                        â”‚               â”‚      â”‚
â”‚  â”‚    â”‚    playerId: "player-xyz789",            â”‚               â”‚      â”‚
â”‚  â”‚    â”‚    reason: "")                           â”‚               â”‚      â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚      â”‚
â”‚  â”‚    â†“                                                          â”‚      â”‚
â”‚  â”‚    result = (true, "player-xyz789", "")                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â†“                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 3. Map Client to Player                                        â”‚    â”‚
â”‚  â”‚    â†“                                                           â”‚    â”‚
â”‚  â”‚    if (result.success) {                                       â”‚    â”‚
â”‚  â”‚      clientToPlayerId["client-abc123"] = "player-xyz789"       â”‚    â”‚
â”‚  â”‚      playerIdToClient["player-xyz789"] = "client-abc123"       â”‚    â”‚
â”‚  â”‚    }                                                           â”‚    â”‚
â”‚  â”‚    â†“                                                           â”‚    â”‚
â”‚  â”‚    Mapping established! âœ…                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â†“                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 4. Create Response Message                                     â”‚    â”‚
â”‚  â”‚    â†“                                                           â”‚    â”‚
â”‚  â”‚    JoinResponsePayload response = {                            â”‚    â”‚
â”‚  â”‚      success: true,                                            â”‚    â”‚
â”‚  â”‚      playerId: "player-xyz789",                                â”‚    â”‚
â”‚  â”‚      playerName: "Alice",                                      â”‚    â”‚
â”‚  â”‚      reason: ""                                                â”‚    â”‚
â”‚  â”‚    }                                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â†“                                                               â”‚
â”‚  SendToClient("client-abc123",                                          â”‚
â”‚               MessageTypes.JOIN_RESPONSE,                               â”‚
â”‚               JsonUtility.ToJson(response))                             â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 7: HOST SENDS RESPONSE TO CLIENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

HOST                                                            CLIENT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚                              â”‚                      â”‚
â”‚ SendToClient()       â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ Create message:      â”‚                              â”‚                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                              â”‚                      â”‚
â”‚ â”‚NetworkMessage    â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚{                 â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ type: "join_     â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚       response"  â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ payload: '{      â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚   "success":true â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚   "playerId":    â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚     "player-     â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚      xyz789",    â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚   "playerName":  â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚     "Alice",     â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚   "reason":""    â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ }'               â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ senderId: "host" â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚ timestamp: ...   â”‚ â”‚                              â”‚                      â”‚
â”‚ â”‚}                 â”‚ â”‚                              â”‚                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ message.ToJson()     â”‚                              â”‚                      â”‚
â”‚        â†“             â”‚                              â”‚                      â”‚
â”‚ transport.           â”‚                              â”‚                      â”‚
â”‚ SendToClient         â”‚                              â”‚                      â”‚
â”‚ ("client-abc123",    â”‚       JSON over network      â”‚                      â”‚
â”‚  messageJson)        â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•>â”‚                      â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ transport.           â”‚
â”‚                      â”‚                              â”‚ OnMessageReceived    â”‚
â”‚                      â”‚                              â”‚ fires âš¡              â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ ClientNetworkManager â”‚
â”‚                      â”‚                              â”‚ .HandleMessage       â”‚
â”‚                      â”‚                              â”‚ Received()           â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Parse message        â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ ProcessMessage()     â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ case JOIN_RESPONSE:  â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ HandleJoinResponse() â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Parse payload:       â”‚
â”‚                      â”‚                              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚                              â”‚ â”‚success: true     â”‚ â”‚
â”‚                      â”‚                              â”‚ â”‚playerId:         â”‚ â”‚
â”‚                      â”‚                              â”‚ â”‚ "player-xyz789"  â”‚ â”‚
â”‚                      â”‚                              â”‚ â”‚playerName:       â”‚ â”‚
â”‚                      â”‚                              â”‚ â”‚ "Alice"          â”‚ â”‚
â”‚                      â”‚                              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Store locally:       â”‚
â”‚                      â”‚                              â”‚ myPlayerId =         â”‚
â”‚                      â”‚                              â”‚   "player-xyz789"    â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Fire event:          â”‚
â”‚                      â”‚                              â”‚ OnJoinResponse       â”‚
â”‚                      â”‚                              â”‚   ?.Invoke(payload)âš¡ â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ ClientUIManager      â”‚
â”‚                      â”‚                              â”‚ .HandleJoinResponse()â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Hide Join Panel      â”‚
â”‚                      â”‚                              â”‚ Show Waiting Panel   â”‚
â”‚                      â”‚                              â”‚        â†“             â”‚
â”‚                      â”‚                              â”‚ Display:             â”‚
â”‚                      â”‚                              â”‚ "Welcome, Alice!     â”‚
â”‚                      â”‚                              â”‚  Waiting for game    â”‚
â”‚                      â”‚                              â”‚  to start..." ğŸ®     â”‚
â”‚                      â”‚                              â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 8: HOST BROADCASTS TO ALL CLIENTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

HOST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  GameSessionManager fired OnPlayerJoined event âš¡                        â”‚
â”‚         â†“                                                               â”‚
â”‚  HostNetworkManager.HandlePlayerJoined(PlayerData player)               â”‚
â”‚         â†“                                                               â”‚
â”‚  Create broadcast payload:                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ PlayerJoinedPayload {                                      â”‚        â”‚
â”‚  â”‚   playerId: "player-xyz789",                               â”‚        â”‚
â”‚  â”‚   playerName: "Alice"                                      â”‚        â”‚
â”‚  â”‚ }                                                          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â†“                                                               â”‚
â”‚  BroadcastToAll(MessageTypes.PLAYER_JOINED, payloadJson)                â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ NetworkMessage {                                           â”‚        â”‚
â”‚  â”‚   type: "player_joined",                                   â”‚        â”‚
â”‚  â”‚   payload: '{"playerId":"player-xyz789",                   â”‚        â”‚
â”‚  â”‚             "playerName":"Alice"}',                        â”‚        â”‚
â”‚  â”‚   senderId: "host",                                        â”‚        â”‚
â”‚  â”‚   timestamp: ...                                           â”‚        â”‚
â”‚  â”‚ }                                                          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â†“                                                               â”‚
â”‚  transport.SendToAllClients(messageJson)                                â”‚
â”‚         â†“                                                               â”‚
â”‚  [Sent to ALL connected clients, including Alice] ğŸ“¢                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                           â†“                         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Alice's â”‚                  â”‚Bob's   â”‚              â”‚Other   â”‚
    â”‚Client  â”‚                  â”‚Client  â”‚              â”‚Clients â”‚
    â”‚        â”‚                  â”‚        â”‚              â”‚        â”‚
    â”‚Updates â”‚                  â”‚Updates â”‚              â”‚Updates â”‚
    â”‚player  â”‚                  â”‚player  â”‚              â”‚player  â”‚
    â”‚list    â”‚                  â”‚list    â”‚              â”‚list    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FINAL STATE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

HOST                                    CLIENT (Alice)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GameSessionManager         â”‚         â”‚ ClientNetworkManager        â”‚
â”‚  â€¢ currentState: Lobby     â”‚         â”‚  â€¢ myPlayerId:              â”‚
â”‚  â€¢ players: {              â”‚         â”‚    "player-xyz789"          â”‚
â”‚      "player-xyz789":      â”‚         â”‚  â€¢ myPlayerName: "Alice"    â”‚
â”‚        PlayerData {        â”‚         â”‚  â€¢ isConnected: true        â”‚
â”‚          playerId: "..."   â”‚         â”‚                             â”‚
â”‚          playerName:"Alice"â”‚         â”‚ ClientUIManager             â”‚
â”‚          score: 0          â”‚         â”‚  â€¢ Current Panel: Waiting   â”‚
â”‚          isConnected: true â”‚         â”‚  â€¢ Display: "Welcome,       â”‚
â”‚        }                   â”‚         â”‚    Alice! Waiting for       â”‚
â”‚    }                       â”‚         â”‚    game to start..."        â”‚
â”‚  â€¢ playerCount: 1          â”‚         â”‚                             â”‚
â”‚                            â”‚         â”‚                             â”‚
â”‚ HostNetworkManager         â”‚         â”‚                             â”‚
â”‚  â€¢ clientToPlayerId: {     â”‚         â”‚                             â”‚
â”‚      "client-abc123":      â”‚         â”‚                             â”‚
â”‚        "player-xyz789"     â”‚         â”‚                             â”‚
â”‚    }                       â”‚         â”‚                             â”‚
â”‚  â€¢ playerIdToClient: {     â”‚         â”‚                             â”‚
â”‚      "player-xyz789":      â”‚         â”‚                             â”‚
â”‚        "client-abc123"     â”‚         â”‚                             â”‚
â”‚    }                       â”‚         â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ready for more players to join! ğŸ®
When 3+ players join, host can start game with "Start Game" button

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•







// Example 2: Shows the order of events that occur when a player submits an answer.

CLIENT SIDE                     HOST SIDE
-----------                     ---------

        [UI Click] 
    â†“
[ClientNetworkManager.SubmitAnswer()]
â†“
[Transport.SendToServer(JSON)]
â†“
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘      Network Boundary              â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â†“
[Transport.OnMessageReceived] â† Event fires
    â†“
[HostNetworkManager.HandleMessageReceived()]
â†“
[ProcessMessage()] â† Routes by message type
    â†“
[HandleSubmitAnswer()] â† Extracts data
    â†“
[GameSessionManager.SubmitAnswer()] â† Game logic
    â†“
[OnAnswerSubmitted event] â† Game fires event
    â†“
[HostNetworkManager.HandleAnswerSubmitted()] â† Optional
    â†“
[BroadcastToAll()] â† If needed
    â†“
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘      Network Boundary              â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â†“
[All Clients Receive Update]
*/
